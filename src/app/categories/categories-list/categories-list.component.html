<div class="background">
  <div class="categories-menu">
    <div class="categories-title">
      <h1 style=" padding-top: .5rem; text-align: center; font-family: helvetica; font-size: 3rem; color:  #D3D6E1">
        Categories </h1>
    </div>
  </div>
  <br>
  <div class="row">
    <div class="col-lg-5 col-md-6 col-sm-12">
      <div class="info-var">
        <h1 class="card-text-style "> Navigate</h1>
        <br>
        <div style="margin-left: 10rem;">
          <app-navigate [navigate]="nav">
          </app-navigate>
        </div>
      </div>
    </div>
    <div class="col-lg-3 col-md-6 col-sm-12">
      <div class="info-var  text-center">
        <div class="">
          <h1 class="card-text-style"> Create Category</h1>
        </div>
        <br>
        <button type="button" class="btn my-btn" (click)="openModal(categoryCreate, null)">
          Add New
        </button>
      </div>
    </div>
    <div class="col-lg-2 col-md-6 col-sm-12">
      <div class=" info-var  text-center">
        <h1 class="card-text-style "> Count </h1>
        <h2 class="card-text-style ">
          {{catCount}}
        </h2>
      </div>
    </div>
    <div class="col-lg-2 col-md-6 col-sm-12">
      <div class="info-var  text-center">
        <h1 class="card-text-style"> Active : {{activeCatCount}} </h1>
        <br>
        <h2 class="card-text-style">
          Inactive : {{inactiveCatCount}}
        </h2>
      </div>
    </div>
  </div>
  <br>
  <br>
  <div class="container-fluid">
    <form [formGroup]="keywordForm">
      <mat-form-field appearance="outline">
        <mat-label>Search Category</mat-label>
        <input matInput placeholder="Enter Data" formControlName="keyword"
          (input)="onSearchChange($event.target.value)">
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
    </form>
    <br>
  </div>
  <div class="">
    <div style="margin-left: 1rem" class=" small-content">
      <mat-radio-group (change)="onChange($event)" aria-label="Select an option">
            <mat-radio-button class="radio-style" value="Active"> Active </mat-radio-button>
            <mat-radio-button  class="radio-style" value="Inactive"> Inactive
            </mat-radio-button>
      </mat-radio-group>
    </div>
  </div>
  <table matSort (matSortChange)="sortData($event)" class="myTable table table-dark">
    <thead class="table-header ">
      <tr>
        <th scope="col">Category ID</th>
        <th mat-sort-header="categoryType" scope="col">Category Type</th>
        <th scope="col">Created Date</th>
        <th scope="col">Info</th>
        <th scope="col">Edit</th>
        <th mat-sort-header="active" scope="col">Active</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let category of allCategories">
        <td>{{category.category_id_pk}}</td>
        <td>{{category.category_type}} </td>
        <td>{{category.created_date}}</td>
        <td> <button type="button" class="action-btn btn "
            (click)="openModal(categoryDetail, category, technician)">info</button> </td>
        <td> <button type="button" class="action-btn btn "
            (click)="openModal(categoryEdit, category, technician); saveCurrentId()">Edit</button>
        </td>
        <td>
          <mat-slide-toggle [checked]="category.active" (change)="onActiveSlide($event, category)"> </mat-slide-toggle>
        </td>
      </tr>
    </tbody>
  </table>
  <br>
  <table-pagination *ngIf="allCategoriesCount != null" (page)="promiseForTable($event)"
    [itemsTotal]="allCategoriesCount" [pageSize]="pSize"> </table-pagination>
</div>


<ng-template #categoryDetail let-c="close" let-d="dismiss">
  <app-categories-detail [technician]="currentTechnician" [category]="currentCategory"> </app-categories-detail>
</ng-template>

<ng-template #categoryEdit let-c="close" let-d="dismiss">
  <app-categories-edit (formValue)="editCategory($event)" [technician]="currentTechnician" [category]="currentCategory">
  </app-categories-edit>
</ng-template>

<ng-template #categoryCreate let-c="close" let-d="dismiss">
  <app-categories-edit (formValue)="createCategory($event)" [technician]="currentTechnician"
    [category]="currentCategory"> </app-categories-edit>
</ng-template>